<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../../style/nav.css">
    <link data-th-href="@{/Styles/template.css}" type="text/css" rel="stylesheet">
<!--    <link data-th-href="@/Admin/card.css" type="text/css" rel="stylesheet"> -->

    <title>Welcome</title>
</head>

    <body>
    
    <!-- Header -->
    <div class="header">
        <!-- Login icon -->
        <div id = "login-container"><a href="/index.html">Logout</a></div>
        <!-- Logo -->
        <h2 class="logo">Spartan Motion</h2>
    <!-- search button -->
      <div class="search-container">
        <form action="/action_page.php">
          <input type="text" placeholder="Search.." name="search">
          <button type="submit"><i class="fa fa-search">Search</i></button>
        </form>
        </div>
    </div>
    
    <!-- All the column sections -->
    <div class="row">
        <!-- Navigation column -->
      <div id ="nav", class="column_side" >
        <ul id="links">
            <li><a href="/">Home</a></li>
            <li><a href="/Admin/Manage_Reviews.html">Manage Reviews</a></li>
            <li><a href="/Admin/report.html">Manage Reports</a></li>
          </ul>
      </div>
      <!-- Middle Section -->
        <div class="column middle">
            <div id = "text">
                <h1> Manage Reviews</h1>
                <p> Here the Admin will have access to the review page and its functionalities.</p>
            </div>
        </div> 
    </div>

    <!-- Main Content -->
    <div class="column middle">
        <!-- Add Review Section -->
        <div th:if="${action == 'add'}">
            <div class="form-container">
                <a id="cancel_button" href="/reviews/all">X</a>
                <h1>Add a New Review</h1>
                <form action="/reviews/add" method="POST">
                    <div class="form-group">
                        <label for="classId">Class ID:</label>
                        <input type="text" id="classId" name="classId" required>
                    </div>
                    <div class="form-group">
                        <label for="userId">User ID:</label>
                        <input type="text" id="userId" name="userId" required>
                    </div>
                    <div class="form-group">
                        <label for="rating">Rating (1-5):</label>
                        <input type="number" id="rating" name="rating" min="1" max="5" required>
                    </div>
                    <div class="form-group">
                        <label for="details">Details:</label>
                        <textarea id="details" name="details" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <button type="submit">Submit Review</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Review Details Section -->
        <div th:if="${action == 'details'}">
            <div>
                <p><strong>Review ID:</strong> <span th:text="${review.reviewId}"></span></p>
                <p><strong>Class ID:</strong> <span th:text="${review.classId.className}"></span></p>
                <p><strong>User ID:</strong> <span th:text="${review.userId}"></span></p>
                <p><strong>Rating:</strong> <span th:text="${review.rating}"></span></p>
                <p><strong>Details:</strong> <span th:text="${review.details}"></span></p>
                <p><strong>Created At:</strong> <span th:text="${review.createdAt}"></span></p>
                <p><strong>Updated At:</strong> <span th:text="${review.updatedAt}"></span></p>
                <p><strong>Status:</strong> <span th:text="${review.status}"></span></p>
            </div>
            <a href="/reviews/all">Back to All Reviews</a>
        </div>

        <!-- Update Review Status Section -->
        <div th:if="${action == 'update'}">
            <form th:action="@{'/reviews/update/status/' + ${review.reviewId}}" method="post">
                <div class="form-group">
                    <p><strong>Review ID:</strong> <span th:text="${review.reviewId}"></span></p>
                    <p><strong>Current Status:</strong> <span th:text="${review.status}"></span></p>
                    <label for="status">New Status:</label>
                    <input type="text" id="status" name="status" required>
                </div>
                <button type="submit">Update</button>
            </form>
        </div>
    </div>

<!-- Footer -->
<footer>
    <div th:replace="~{/fragments/_footer :: footer}"></div>
</footer>

<style>
    .column_middle{
        width: 100%;
        margin-right: 5%;
    }
</style>

</body>
</html>